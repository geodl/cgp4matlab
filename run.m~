cgp = cgptoolbox.CGP(struct( ...
	'rows', 1, ...
	'columns', 20, ...
	'levels_back', 20, ...
	'last_node_output', true, ...
	'runs', 5, ...
	'outputs', 1, ...
	'generations', 2000, ...
	'population', 4, ...
	'mutation', 0.1, ...
	'fitness_solution', 0.01, ...
    'fitness_operator', '<=' ...
));

a = zeros(1, 50);
b = zeros(1, 50);
index = 1;
for x = -1:0.04:1
    a(index) = x^6 - 2*(x^4) + x^2;
    b(index) = x;
    index = index + 1;
end

cgp.addInputs( ...
    struct( ...
        'first', struct('x', b, 'y', a), ...
        'second', 1.0 ...
    ) ...
);

cgp.addParameters( ...
	struct(                                ...
		'name', 'interval',                ...
		'initialize', @()rand(),           ...
		'mutate', @(x)x + rand()               ...
	) ...
%);

cgp.addCallbacks(struct( ...
   'NEW_GENERATION', @(a,generation,run,fitness,c,d,e,f,g)fprintf('run %d - generation %d - %.12f\n',run, generation, fitness) ...
));

cgp.addFunctionsFromPath('function-set/');
cgp.addFitnessFunction(@fitness);

cgp.train();
